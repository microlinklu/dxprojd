<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1" user-scalable=no>
<title>商品详情</title>
<link rel="stylesheet" href="style/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="style/reset.css" />
<link type="text/css" rel="stylesheet" href="style/goods_details.css" />
<script src="js/js/myfocus-2.0.1.min.js" type="text/javascript"></script>
<script src="js/js/mf-pattern/mF_YSlider.js" type="text/javascript"></script>
<link href="js/js/mf-pattern/mF_YSlider.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
myFocus.set({
	id:'lbBox'}
	)
</script>
<script src="js/base.js" type="text/javascript"></script>
</head>

<body>
    <div class="wrap">
       <div class="top_details">
          <ul>
             <li class="return"><a href="shop.html"><img src="images/icon/back.png" class="return"/></a></li>
             <li class="right_title">商品详情</li>  
          </ul>
       </div><!--top结束-->
       
       <div id="lbBox">
          <div class="pic">
               <ul>
                  <li><img src="images/mukewang/ad2.jpg"/></li>
                  <li><img src="images/mukewang/ad3.jpg"></li>
                  <li><img src="images/mukewang/ad.jpg"/></li>
                  <li><img src="images/mukewang/ad3.jpg"/></li>
                  <li><img src="images/mukewang/ad2.jpg"/></li>
               </ul>
           </div>
       </div><!--轮播图结束-->

       <!--购物车开始-->
        <div class="container" ng-app="app" ng-controller="table">
            <table class="table table"  ng-repeat="a in Products">
                <tr>
                    <td colspan="3"><strong>产品编号:</strong>{{a.num}}</td>
                </tr>
                <tr>
                    <td>产品名称 : {{a.name}}</td><td></td><td></td>
                </tr>
                <tr>
                    <td colspan="3">购买数量 : <button class="btn " ng-click="reduce($index)">-</button>
                        <input style="width: 1rem; height: 0.5rem; text-align:center;" type="number" ng-model="a.quan" >
                        <button class="btn " ng-click="add($index)">+</button>
                    </td>
                </tr>
                <tr>
                    <td>产品单价:{{a.price}}</td><td></td><td></td>
                </tr>
                <tr>
                    <td>产品总价:{{a.price*a.quan}}</td><td></td><td></td>

                </tr>
                <tr> <td><button class="btn btn-danger btn-group-xs " ng-click="delete()">删除</button></td></tr>
            </table>
            <table class="table table">
                <tr>
                    <td colspan="2"><strong>总价格：</strong>{{totalPrice()}}</td>
                    <td><strong>总数量：</strong>{{sumQuan()}}</td>
                </tr>
                <tr>
                    <td><button class="btn btn-danger" ng-click="removeAll()">清空购物车</button></td>
                    <td><button class="btn btn-success" ng-click="removeAll()">结算</button></td>
                </tr>
            </table>
        <div class="kong"></div>
        </div>
       <!--购物车结束-->

        <div class="navBox">
            <ul class="nav">
                <li>
                    <a href="homepage.html"><img src="images/icon/shouye.png"><br />
                        <span>首页</span>
                    </a>
                </li>
                <li>
                    <a href="news.html"><img src="images/icon/news1.png"/><br />
                        <span>新闻</span>
                    </a>
                </li>
                <li>
                    <a href="task.html"><img src="images/icon/renwu1.png" /><br />
                        <span>任务</span>
                    </a>
                </li>
                <li>
                    <a href="shop.html"><img src="images/icon/gouwuch1.png" /><br />
                        <span>商城</span>
                    </a>
                </li>
                <li>
                    <a href="my.html"><img src="images/icon/wode1.png"/><br />
                        <span>我的</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <script src="js/angular.min.js"></script>
    <script>
        var app=angular.module("app",[]);
        app.controller("table",function($scope){
            $scope.Products=[
                {num:"1000",name:"iPhone 6 Plus",price:"6888",quan:2},
                {num:"1001",name:"iPhone ",price:"5288",quan:2},
                {num:"1002",name:"iPhone 5S",price:"4188",quan:2},
                {num:"1003",name:"iPhone 5c",price:"3288",quan:2}
            ],
//总价格
                    $scope.totalPrice=function(){
                        var total=0;
                        angular.forEach($scope.Products,function(item){
                            total+=item.price*item.quan;
//                total+=$scope.Products[index].price*$scope.Products[index].quan;
                        })
                        return total;
                    },
//   总数量
                    $scope.sumQuan=function(){
                        var total=0;
                        angular.forEach($scope.Products,function(item){
                            total+=item.quan;

//                total+=$scope.Products[index].quan;
                        })
                        return total;
                    }
// 删除一行
            $scope.delete=function(index){
                $scope.Products.splice(index,1 );
            },
// 删除全部
                    $scope.removeAll=function(){
                        $scope.Products=[];
                    },
//数量增加
                    $scope.add=function(index){
                        $scope.Products[index].quan++;
                    }
//数量减少
            $scope.reduce=function(index){
                if($scope.Products[index].quan>1){
                    $scope.Products[index].quan--;
                }
                else{
                    var info=confirm("是否删除该元素");
                    if(info){
                        $scope.delete();
                    }
                    else{
                        $scope.Products[index].quan=1;
                    }
                }
            }
        })
    </script>
</body>
</html>
